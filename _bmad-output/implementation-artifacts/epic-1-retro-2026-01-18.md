# Epic 1 Retrospective: Secure Sign-In & Access Control

Date: 2026-01-18
Epic: 1
Title: Secure Sign-In & Access Control

## Participants
- Thorsten (Project Lead)
- Bob (Scrum Master)
- Amelia (Developer)
- John (Product Manager)
- Winston (Architect)
- Murat (QA/Test Architect)

## Epic Summary
Epic 1 delivered Entra ID SSO, role determination, and access denial for unauthorized users. The work established the
auth foundation for all future booking features.

## Scope Completed
- Entra ID SSO login and callback flow (FR1)
- Role determination from Entra ID groups (FR2)
- Access-denied handling for unauthorized users (FR3)

## What Went Well
- Auth flow shipped end-to-end with JSON:API error handling in place.
- Test-auth path enabled reliable E2E validation without external Entra ID dependencies.
- SPA routing now handles forbidden users cleanly via a dedicated access-denied screen.

## Challenges / Friction
- Group membership rules required careful handling (users vs admins) and revalidation on each request.
- CI linting surfaced security lint warnings that required targeted suppressions in tests.
- Local E2E runs produced platform warnings that were noisy but non-blocking.

## Lessons Learned
- A test-auth path is essential for stable E2E in auth-heavy flows.
- Explicit forbidden/unauthorized JSON:API helpers reduce inconsistent error handling.
- SPA fallback routes need explicit coverage for auth edge cases (forbidden, unauthenticated).

## Testing & Quality Notes
- Backend and frontend tests cover login, role detection, and access denial paths.
- Cypress auth coverage exists for unauthenticated and forbidden users.

## Technical Debt / Follow-Ups
- None explicitly recorded in story notes. Continue monitoring auth middleware complexity as feature scope expands.

## Previous Retro Follow-Through
- First retrospective; no prior action items to track.

## Next Epic Preview: Epic 2 (Space Discovery & Availability)
- Focus: areas, rooms, desks, equipment, availability.
- Dependencies:
  - Auth/permission foundation from Epic 1 is ready.
  - Space data source must be defined for areas/rooms/desks (config-based data pipeline still pending in Epic 6).

## Risks & Unknowns for Epic 2
- Data source for space discovery may need a stub or early config loader before Epic 6.
- Availability requires real-time updates; WebSocket/polling path should be validated early.

## Action Items
- Define API contracts for areas/rooms/desks before implementation.
- Align on a temporary data source for space discovery if config loader is not yet in place.
- Ensure access control rules are applied consistently to new endpoints.

## Preparation Tasks for Epic 2
- Create seed space data for development and E2E.
- Add API doc stubs for discovery endpoints.
- Confirm UI routing flow for area -> room -> desk navigation.

## Critical Path Items
- None identified at this time.

## Readiness Assessment
- Testing: covered for Epic 1 scope.
- Deployment: not assessed in story records.
- Stakeholder acceptance: not assessed in story records.
- Codebase health: stable per story completion notes.

## Summary
Epic 1 successfully delivered the auth and access-control foundation. The primary next need is to lock down the data
source and API contracts for space discovery so Epic 2 can move quickly without rework.
