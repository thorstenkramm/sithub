get:
  summary: List my bookings
  description: |
    Returns the current user's future bookings (today and later), ordered by date.
    Includes both bookings the user made for themselves and bookings made on their behalf by others.
    Also includes bookings the current user made for other users.
  operationId: listMyBookings
  tags:
    - Bookings
  responses:
    '200':
      description: List of user's upcoming bookings
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/MyBookingsCollectionResponse
          example:
            data:
              - type: bookings
                id: b1234567-89ab-cdef-0123-456789abcdef
                attributes:
                  item_id: item-1
                  item_name: Corner Desk
                  item_group_id: ig-101
                  item_group_name: Room 101
                  area_id: area-1
                  area_name: Main Office
                  booking_date: '2026-01-20'
                  created_at: '2026-01-19T10:30:00Z'
                  note: Arriving after noon
                  booked_by_user_id: ''
                  booked_by_user_name: ''
                  booked_for_me: false
              - type: bookings
                id: c2345678-90ab-cdef-0123-456789abcdef
                attributes:
                  item_id: item-2
                  item_name: Window Desk
                  item_group_id: ig-101
                  item_group_name: Room 101
                  area_id: area-1
                  area_name: Main Office
                  booking_date: '2026-01-21'
                  created_at: '2026-01-19T11:00:00Z'
                  note: ''
                  booked_by_user_id: colleague-123
                  booked_by_user_name: Jane Doe
                  booked_for_me: true
    '401':
      description: Unauthorized - login required
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse

post:
  summary: Create a booking
  description: |
    Creates a single-day or multi-day booking for an item on specific date(s).
    Optionally, you can book on behalf of another user by providing
    for_user_id, or create a guest booking with is_guest and for_user_name.
  operationId: createBooking
  tags:
    - Bookings
  requestBody:
    required: true
    content:
      application/vnd.api+json:
        schema:
          $ref: ../openapi.yaml#/components/schemas/CreateBookingRequest
        examples:
          self_booking:
            summary: Book for yourself
            value:
              data:
                type: bookings
                attributes:
                  item_id: item-1
                  booking_date: '2026-01-20'
          on_behalf_booking:
            summary: Book on behalf of a colleague
            value:
              data:
                type: bookings
                attributes:
                  item_id: item-1
                  booking_date: '2026-01-20'
                  for_user_id: colleague-123
          guest_booking:
            summary: Book for a guest
            value:
              data:
                type: bookings
                attributes:
                  item_id: item-1
                  booking_date: '2026-01-20'
                  is_guest: true
                  for_user_name: Guest Visitor
                  guest_email: guest@example.com
          multi_day_booking:
            summary: Multi-day booking
            value:
              data:
                type: bookings
                attributes:
                  item_id: item-1
                  booking_dates:
                    - '2026-01-20'
                    - '2026-01-21'
                    - '2026-01-22'
  responses:
    '201':
      description: Booking created successfully
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/BookingSingleResponse
          example:
            data:
              type: bookings
              id: b1234567-89ab-cdef-0123-456789abcdef
              attributes:
                item_id: item-1
                user_id: user-123
                booking_date: '2026-01-20'
                created_at: '2026-01-19T10:30:00Z'
                note: ''
    '400':
      description: Bad request - missing or invalid parameters
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '400'
                title: Bad Request
                detail: item_id is required
                code: bad_request
    '401':
      description: Unauthorized - login required
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
    '404':
      description: Item not found
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '404'
                title: Not Found
                detail: Item not found
                code: not_found
    '409':
      description: Booking conflict - item already booked for this date
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '409'
                title: Conflict
                detail: Item is already booked for this date
                code: conflict
