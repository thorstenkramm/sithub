get:
  summary: List my bookings
  description: |
    Returns the current user's future bookings (today and later), ordered by date.
    Includes both bookings the user made for themselves and bookings made on their behalf by others.
    Also includes bookings the current user made for other users.
  operationId: listMyBookings
  tags:
    - Bookings
  responses:
    '200':
      description: List of user's upcoming bookings
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/MyBookingsCollectionResponse
          example:
            data:
              - type: bookings
                id: b1234567-89ab-cdef-0123-456789abcdef
                attributes:
                  desk_id: desk-1
                  desk_name: Corner Desk
                  room_id: room-101
                  room_name: Room 101
                  area_id: area-1
                  area_name: Main Office
                  booking_date: '2026-01-20'
                  created_at: '2026-01-19T10:30:00Z'
                  booked_by_user_id: ''
                  booked_by_user_name: ''
                  booked_for_me: false
              - type: bookings
                id: c2345678-90ab-cdef-0123-456789abcdef
                attributes:
                  desk_id: desk-2
                  desk_name: Window Desk
                  room_id: room-101
                  room_name: Room 101
                  area_id: area-1
                  area_name: Main Office
                  booking_date: '2026-01-21'
                  created_at: '2026-01-19T11:00:00Z'
                  booked_by_user_id: colleague-123
                  booked_by_user_name: Jane Doe
                  booked_for_me: true
    '401':
      description: Unauthorized - login required
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse

post:
  summary: Create a booking
  description: |
    Creates a single-day booking for a desk on a specific date.
    Optionally, you can book on behalf of another user by providing
    for_user_id and for_user_name in the request.
  operationId: createBooking
  tags:
    - Bookings
  requestBody:
    required: true
    content:
      application/vnd.api+json:
        schema:
          $ref: ../openapi.yaml#/components/schemas/CreateBookingRequest
        examples:
          self_booking:
            summary: Book for yourself
            value:
              data:
                type: bookings
                attributes:
                  desk_id: desk-1
                  booking_date: '2026-01-20'
          on_behalf_booking:
            summary: Book on behalf of a colleague
            value:
              data:
                type: bookings
                attributes:
                  desk_id: desk-1
                  booking_date: '2026-01-20'
                  for_user_id: colleague-123
                  for_user_name: Jane Doe
  responses:
    '201':
      description: Booking created successfully
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/BookingSingleResponse
          example:
            data:
              type: bookings
              id: b1234567-89ab-cdef-0123-456789abcdef
              attributes:
                desk_id: desk-1
                user_id: user-123
                booking_date: '2026-01-20'
                created_at: '2026-01-19T10:30:00Z'
    '400':
      description: Bad request - missing or invalid parameters
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '400'
                title: Bad Request
                detail: desk_id is required
                code: bad_request
    '401':
      description: Unauthorized - login required
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
    '404':
      description: Desk not found
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '404'
                title: Not Found
                detail: Desk not found
                code: not_found
    '409':
      description: Booking conflict - desk already booked for this date
      content:
        application/vnd.api+json:
          schema:
            $ref: ../openapi.yaml#/components/schemas/ErrorResponse
          example:
            errors:
              - status: '409'
                title: Conflict
                detail: Desk is already booked for this date
                code: conflict
